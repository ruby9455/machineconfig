{
  "$schema": "https://charm.land/crush.json",
  "providers": {
    "openai": {
      "id": "openai",
      "name": "OpenAI",
      "base_url": "https://api.openai.com/v1",
      "type": "openai",
      "api_key": "$OPENAI_API_KEY",
      "extra_headers": {
        "OpenAI-Beta": "assistants=v2"
      },
      "models": [
        {
          "id": "gpt-4o",
          "name": "GPT-4o",
          "cost_per_1m_in": 5,
          "cost_per_1m_out": 15,
          "cost_per_1m_in_cached": 1,
          "cost_per_1m_out_cached": 3,
          "context_window": 128000,
          "default_max_tokens": 16384,
          "can_reason": false,
          "has_reasoning_efforts": false,
          "supports_attachments": true
        },
        {
          "id": "gpt-4o-mini",
          "name": "GPT-4o mini",
          "cost_per_1m_in": 0.15,
          "cost_per_1m_out": 0.6,
          "cost_per_1m_in_cached": 0.05,
          "cost_per_1m_out_cached": 0.2,
          "context_window": 128000,
          "default_max_tokens": 8192,
          "can_reason": false,
          "has_reasoning_efforts": false,
          "supports_attachments": true
        }
      ]
    },
    "anthropic": {
      "id": "anthropic",
      "name": "Anthropic",
      "base_url": "https://api.anthropic.com/v1",
      "type": "anthropic",
      "api_key": "$ANTHROPIC_API_KEY",
      "extra_headers": {
        "anthropic-version": "2023-06-01"
      },
      "models": [
        {
          "id": "claude-3-5-sonnet-20240620",
          "name": "Claude 3.5 Sonnet",
          "cost_per_1m_in": 3,
          "cost_per_1m_out": 15,
          "cost_per_1m_in_cached": 3.75,
          "cost_per_1m_out_cached": 0.3,
          "context_window": 200000,
          "default_max_tokens": 8000,
          "can_reason": true,
          "has_reasoning_efforts": true,
          "default_reasoning_effort": "medium",
          "supports_attachments": true
        },
        {
          "id": "claude-3-haiku-20240307",
          "name": "Claude 3 Haiku",
          "cost_per_1m_in": 0.25,
          "cost_per_1m_out": 1.25,
          "cost_per_1m_in_cached": 0.05,
          "cost_per_1m_out_cached": 0.1,
          "context_window": 200000,
          "default_max_tokens": 4000,
          "can_reason": true,
          "has_reasoning_efforts": true,
          "default_reasoning_effort": "low",
          "supports_attachments": true
        }
      ]
    },
    "openrouter": {
      "id": "openrouter",
      "name": "OpenRouter",
      "base_url": "https://openrouter.ai/api/v1",
      "type": "openai",
      "api_key": "$OPENROUTER_API_KEY",
      "models": [
        {
          "id": "deepseek/deepseek-chat",
          "name": "Deepseek V3",
          "cost_per_1m_in": 0.27,
          "cost_per_1m_out": 1.1,
          "cost_per_1m_in_cached": 0.07,
          "cost_per_1m_out_cached": 0.3,
          "context_window": 64000,
          "default_max_tokens": 5000,
          "can_reason": true,
          "has_reasoning_efforts": false,
          "supports_attachments": false
        }
      ]
    },
    "ollama": {
      "id": "ollama",
      "name": "Ollama",
      "base_url": "http://localhost:11434/v1/",
      "type": "openai",
      "models": [
        {
          "id": "qwen2.5-coder:14b",
          "name": "Qwen2.5 Coder 14B",
          "cost_per_1m_in": 0,
          "cost_per_1m_out": 0,
          "cost_per_1m_in_cached": 0,
          "cost_per_1m_out_cached": 0,
          "context_window": 32768,
          "default_max_tokens": 4096,
          "can_reason": false,
          "has_reasoning_efforts": false,
          "supports_attachments": false
        }
      ]
    }
  },
  "models": {
    "large": {
      "provider": "anthropic",
      "model": "claude-3-5-sonnet-20240620",
      "think": true,
      "max_tokens": 6000
    },
    "small": {
      "provider": "openai",
      "model": "gpt-4o-mini",
      "max_tokens": 4096
    }
  },
  "lsp": {
    "python": {
      "command": "pyright-langserver",
      "args": ["--stdio"],
      "filetypes": ["py"],
      "env": {
        "PYRIGHT_PYTHON_FORCE_VERSION": "3.13"
      }
    },
    "ruff": {
      "command": "ruff",
      "args": ["server"],
      "filetypes": ["py"]
    },
    "json": {
      "command": "vscode-json-languageserver",
      "args": ["--stdio"]
    }
  },
  "mcp": {
    "filesystem": {
      "type": "stdio",
      "command": "uv",
      "args": [
        "run",
        "python",
        "-m",
        "machineconfig.scripts.python.ai.solutions._shared"
      ],
      "timeout": 120,
      "env": {
        "UV_PROJECT_ENV": "$(pwd)"
      }
    },
    "github-docs": {
      "type": "http",
      "url": "https://api.github.com/mcp/",
      "timeout": 90,
      "headers": {
        "Authorization": "$(echo Bearer $GITHUB_MCP_TOKEN)",
        "X-Crush-Client": "machineconfig"
      }
    },
    "architect": {
      "type": "sse",
      "url": "https://architect.mcp.machineconfig.local/stream",
      "timeout": 120,
      "headers": {
        "Authorization": "$(echo Bearer $ARCHITECT_MCP_TOKEN)"
      }
    }
  },
  "options": {
    "context_paths": [
      "CRUSH.md",
      "src/machineconfig/scripts/python/ai/solutions/crush/privacy.md",
      ".github/copilot-instructions.md",
      "src/machineconfig/scripts/python/ai/solutions/_shared.py"
    ],
    "tui": {
      "compact_mode": true,
      "diff_mode": "unified"
    },
    "debug": false,
    "debug_lsp": false,
    "disable_auto_summarize": false,
    "data_directory": ".crush"
  },
  "permissions": {
    "allowed_tools": [
      "view",
      "ls",
      "glob",
      "grep",
      "write"
    ]
  }
}
